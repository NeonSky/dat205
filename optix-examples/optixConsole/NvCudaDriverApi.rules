<?xml version="1.0" encoding="utf-8"?>
<VisualStudioToolFile
	Name="CUDA Driver Api Build Rule (v3.2) OptiX Mod"
	Version="8.00"
	>
	<Rules>
		<CustomBuildRule
			Name="Driver Api Build Rule"
			DisplayName="CUDA Driver Api"
			CommandLine="echo [NvccPath] [Keep] [GPUDebugInfo] [ExtraNvccOptions] [Arch] -ccbin &quot;$(VCInstallDir)bin&quot; [Include] [RequiredIncludes] [MaxRegCount] [PtxAsOptionV] [NvccCompilation] [NvccCompilationBitness] $(InputFileName) &#x0D;&#x0A;                      [NvccPath] [Keep] [GPUDebugInfo] [ExtraNvccOptions] [Arch] -ccbin &quot;$(VCInstallDir)bin&quot; [Include] [RequiredIncludes] [MaxRegCount] [ptxasoptionv] [NvccCompilation] [NvccCompilationBitness] &quot;$(InputPath)&quot;"
			Outputs="[CompileOut]"
			AdditionalDependencies="[AddedDependencies]"
			FileExtensions="*.cu"
			ExecutionDescription="Compiling with CUDA Build Rule..."
			>
			<Properties>
				<StringProperty
					Name="NvccPath"
					IsReadOnly="true"
					DisplayName="Compiler Path"
					Description="Designated path to nvcc.exe"
					Switch="&quot;[value]&quot;"
					DefaultValue="$(CUDA_PATH)\bin\nvcc.exe"
				/>
				<StringProperty
					Name="RequiredIncludes"
					IsReadOnly="true"
					DisplayName="Required Include Directories"
					Description="This include must exist CUDA headers may be accessed."
					Switch="-I&quot;[value]&quot;"
					DefaultValue="$(CUDA_PATH)\include"
					Delimited="true"
					Delimiters=";"
				/>
				<StringProperty
					Name="Include"
					DisplayName="Additional Include Directories"
					Description="Specifies one or more directories to add to the include path; use semi-colon delimited list if more than one.  (/I[path])"
					Switch="-I&quot;[value]&quot;"
					Delimited="true"
					Delimiters=";"
					Inheritable="true"
				/>
				<StringProperty
					Name="AddedDependencies"
					DisplayName="Source Dependencies"
					Description="Add additional source file dependencies"
					Switch="[value]"
				/>
				<BooleanProperty
					Name="GPUDebugInfo"
					DisplayName="Generate GPU Debug Information"
					PropertyPageName="GPU"
					Description="Specifies whether or not GPU debugging information is generated by the CUDA compiler.  (-G0)"
					Switch="-G0"
				/>
				<EnumProperty
					Name="NvccCompilation"
					DisplayName="NVCC Compilation Type"
					PropertyPageName="GPU"
					Description="Select desired output of NVCC compilation (-c/-compile, -cuda, -gpu, -cubin, -ptx)"
					DefaultValue="2"
					>
					<Values>
						<EnumValue
							Value="0"
							Switch="-gpu -o [CompileOut]"
							DisplayName="Generate .gpu file  (-gpu)"
						/>
						<EnumValue
							Value="1"
							Switch="-cubin -o [CompileOut]"
							DisplayName="Generate .cubin file  (-m32 -cubin)"
						/>
						<EnumValue
							Value="2"
							Switch="-ptx -o [CompileOut]"
							DisplayName="Generate .ptx file  (-ptx)"
						/>
					</Values>
				</EnumProperty>
				<EnumProperty
					Name="NvccCompilationBitness"
					DisplayName="NVCC Compilation Bitness"
					PropertyPageName="GPU"
					Description="Select desired bitness of NVCC compilation (-m32,-m64)"
					>
					<Values>
						<EnumValue
							Value="0"
							Switch="-m32"
							DisplayName="Generate 32 bit output (-m32)"
						/>
						<EnumValue
							Value="1"
							Switch="-m64"
							DisplayName="Generate 64 bit output (-m64)"
						/>
					</Values>
				</EnumProperty>
				<StringProperty
					Name="CompileOut"
					DisplayName="Compiler Output Name"
					Description="Sets output name"
					Switch="[value]"
					DefaultValue="&quot;$(OutDir)/$(InputName).ptx&quot;"
				/>
				<EnumProperty
					Name="Arch"
					DisplayName="GPU Architecture"
					PropertyPageName="GPU"
					Description="Select option for the GPU architecture to use on the command line (-arch sm_10 through sm_20)"
					DefaultValue="10"
					>
					<Values>
						<EnumValue
							Value="0"
							DisplayName="Unspecified"
						/>
						<EnumValue
							Value="10"
							Switch="-arch sm_10"
							DisplayName="sm_10"
						/>
						<EnumValue
							Value="11"
							Switch="-arch sm_11"
							DisplayName="sm_11"
						/>
						<EnumValue
							Value="12"
							Switch="-arch sm_12"
							DisplayName="sm_12"
						/>
						<EnumValue
							Value="13"
							Switch="-arch sm_13"
							DisplayName="sm_13"
						/>
						<EnumValue
							Value="14"
							Switch="-arch sm_14"
							DisplayName="sm_14"
						/>
						<EnumValue
							Value="15"
							Switch="-arch sm_15"
							DisplayName="sm_15"
						/>
						<EnumValue
							Value="20"
							Switch="-arch sm_20"
							DisplayName="sm_20"
						/>
					</Values>
				</EnumProperty>
				<IntegerProperty
					Name="MaxRegCount"
					DisplayName="Max Used Register "
					PropertyPageName="GPU"
					Description="Specify the maximum amount of registers that GPU functions can use. (-maxrregcount)"
					Switch="-maxrregcount=[Value]"
					DefaultValue="64"
				/>
				<BooleanProperty
					Name="PtxAsOptionV"
					DisplayName="Verbose PTXAS Output"
					PropertyPageName="GPU"
					Switch="--ptxas-options=-v"
				/>
				<StringProperty
					Name="ExtraNvccOptions"
					DisplayName="Extra Options"
					PropertyPageName="GPU"
					Description="Supply any additional command line options to NVCC"
					Switch="[value]"
				/>
				<BooleanProperty
					Name="UseFastMath"
					DisplayName="Use Fast Math"
					PropertyPageName="GPU"
					Description="Use optimizations which are ordinarily OK for graphics applications. ( --use_fast_math )"
					Switch="--use_fast_math"
					DefaultValue="true"
				/>
				<BooleanProperty
					Name="Keep"
					DisplayName="Keep Preprocessed Files"
					PropertyPageName="GPU"
					Description="Specifies that preprocessor files generated by the CUDA compiler are not deleted, ie..ptx, .cubin, cudafe1.c, cudafe1.cpp, cudafe1.gpu, etc. (--keep)"
					Switch="--keep"
				/>
			</Properties>
		</CustomBuildRule>
	</Rules>
</VisualStudioToolFile>
